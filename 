[33mcommit efa1cbe0359e3d7e54ef06b3a2a2c41bf928b04f[m[33m ([m[1;36mHEAD[m[33m -> [m[1;32mmaster[m[33m)[m
Author: twil3akine <twil3akine@gmail.com>
Date:   Mon Feb 9 11:33:15 2026 +0900

    fix: label count logic in twnc.rs

[33mcommit 43fb28d17421036a3dcc79ecbb48985aa7039485[m
Merge: ced5155 c11850b
Author: twil3akine <twil3akine@gmail.com>
Date:   Sun Feb 8 15:55:57 2026 +0900

    Merge branch 'fix/refact'

[33mcommit c11850b844c7fc9176a9b74c955ceddc95890035[m
Author: twil3akine <twil3akine@gmail.com>
Date:   Sun Feb 8 15:52:24 2026 +0900

    refactor: remove unused UnknownLabel error variant
    
    - Since labels are resolved to addresses during assembly (in twnc), the VM does not need to handle label errors. Removed the redundant `UnknownLabel` variant.

[33mcommit 32b7132c7f50facafa3ccf021de7e89ec1186b17[m
Author: twil3akine <twil3akine@gmail.com>
Date:   Sun Feb 8 15:51:53 2026 +0900

    feat: implement safe memory access with UninitializedMemory error
    
    - Added `store_memory` and `load_memory` methods to encapsulate memory operations.
    - Introduced `VmError::UninitializedMemory` to handle attempts to load from empty memory slots.
    - Refactored `LOAD` and `STORE` instructions to use these safe methods instead of raw indexing.

[33mcommit 50183c7f9a8c9b7e22ed4c6b43b3ccb9e26f15bb[m
Author: twil3akine <twil3akine@gmail.com>
Date:   Sun Feb 8 15:28:21 2026 +0900

    feat: return error on invalid opcode encounter
    
    - Implemented `InvalidOpCode` error variant to gracefully handle bytes that do not correspond to any valid instruction.

[33mcommit 07a82e4883b8e0c007ac0d58d0d0ce060915d3e1[m
Author: twil3akine <twil3akine@gmail.com>
Date:   Sun Feb 8 15:24:00 2026 +0900

    feat: detect division by zero in arithmetic instructions
    
    - The VM now returns `VmError::DivisionByZero` instead of panicking when attempting to divide or modulo by zero.

[33mcommit 6bc07b764f3a95d12f01d9ecf6706962361eba3d[m
Author: twil3akine <twil3akine@gmail.com>
Date:   Sun Feb 8 15:16:38 2026 +0900

    feat: implement safe stack push to prevent overflow
    
    - Added `push_stack` method with bounds checking against `STACK_SIZE`.
    - The VM now returns `VmError::StackOverflow` instead of allowing the stack to grow indefinitely or panic upon memory exhaustion.

[33mcommit 51f602b52ecaa035736e395cf1ceb8bfe2ae6d1d[m
Author: twil3akine <twil3akine@gmail.com>
Date:   Sun Feb 8 15:11:12 2026 +0900

    fix: implement safe stack popping to prevent underflow panics
    
    - Replaced direct `stack.pop()` calls with a safe wrapper method.
    - The VM now returns `VmError::StackUnderflow` instead of panicking when
    attempting to pop from an empty stack.

[33mcommit 01fdfbdddb515a064da2554fc87869bdd3878902[m
Author: twil3akine <twil3akine@gmail.com>
Date:   Sun Feb 8 15:09:41 2026 +0900

    feat: enhance error reporting with execution address
    
    - Updated `main` to catch runtime errors from `vm.run()`.
    - It now prints the error message along with the current Program Counter
    (PC) (e.g., `at address 0x05`) and ensures the process exits with status
    code 1.

[33mcommit e40e1f381307db8717da57f54de18566fbbef542[m
Author: twil3akine <twil3akine@gmail.com>
Date:   Sun Feb 8 15:07:01 2026 +0900

    refact: improve internal label logic

[33mcommit 53834553c390546900db9d83876c4bf6cc49c507[m
Author: twil3akine <twil3akine@gmail.com>
Date:   Sun Feb 8 11:39:21 2026 +0900

    fix: suppress misleading error message on subprocess failure
    
    - Previously, if `twnc` or `twnvm` exited with a non-zero code (e.g., due to a compilation or runtime error), the driver incorrectly reported that the command failed to execute.
    - This commit updates the logic to silently propagate the exit code when the subprocess runs but fails, and only prints the "execution failed" error if the command cannot be started at all.

[33mcommit 2f6f8c6c9f2b7ebcd7cfe2eae38aba22df937061[m
Author: twil3akine <twil3akine@gmail.com>
Date:   Sun Feb 8 11:19:17 2026 +0900

    feat: implement next_byte with bounds checking and propagate errors
    
    - Implemented `next_byte` method in the `VM` struct to safely fetch instructions. It now returns `VmError::UnexpectedEof` instead of panicking when reading past the end of tokens.
    - Updated `run` method signature to return `Result<(), VmError>` to properly propagate execution errors to `main`.

[33mcommit db4e508169bbeae808ad59e8271b7da22fab8b23[m
Author: twil3akine <twil3akine@gmail.com>
Date:   Sun Feb 8 11:00:03 2026 +0900

    feat: introduce VmError enum for runtime error handling
    
    - Defined `VmError` within `src/bin/twnvm.rs` to handle VM-specific runtime errors (e.g., stack underflow, division by zero).
    - This enum is scoped locally to the VM binary as it is not required by the assembler or other components.

[33mcommit dcd0737b259f8a20c2b2e51aafa19d923f32956d[m
Author: twil3akine <twil3akine@gmail.com>
Date:   Sun Feb 8 01:09:33 2026 +0900

    refactor: encapsulate VM logic into VM struct
    
    - Introduced a `VM` struct to hold state (pc, stack, memory).
    - Moved the execution logic from `main` to `VM::new` and `VM::run` methods to improve maintainability and testability.

[33mcommit bdfd6e936922a0c5f19080d06effbc39bded0f22[m
Author: twil3akine <twil3akine@gmail.com>
Date:   Sun Feb 8 00:43:09 2026 +0900

    refactor: migrate VM and Assembler logic to use OpCode enum
    
    - Introduced `OpCode` enum in `src/lib.rs` to centralize instruction definitions.
    - Refactored internal logic in `twnc` (assembler) and `twnvm` (VM) to use this enum instead of raw `HashMap` or byte matching.

[33mcommit b82cc360c65a221ee562cf78ddc4fd66daf3aa03[m
Author: twil3akine <twil3akine@gmail.com>
Date:   Sun Feb 8 00:26:57 2026 +0900

    refactor: introduce OpCode enum and merge utils into lib
    
    This commit centralizes instruction definitions by adding an OpCode enum in `src/lib.rs`. It provides `from_u8` and `from_str` methods to share logic between the assembler and VM.
    Additionally, the `utils` module has been merged into `lib.rs` to simplify the project structure.

[33mcommit 175578142e21bbd70f248a4475eb55b1636e6532[m
Author: twil3akine <twil3akine@gmail.com>
Date:   Sun Feb 8 00:16:44 2026 +0900

    fix: correct MOD instruction to pop operands from stack
    
    - Previously, the MOD (0x14) instruction incorrectly consumed an immediate value, behaving like MODI. This commit fixes the implementation to pop two values from the stack, aligning it with the specification in README.

[33mcommit ced5155387d7d5dce4c663fc1a18993222bdb048[m
Merge: ace4da9 08570c6
Author: twil3akine <twil3akine@gmail.com>
Date:   Sun Feb 8 00:04:48 2026 +0900

    Merge branch 'feat/comment'

[33mcommit 08570c6cd729259556dd22e0a4aaf8c5cd0ca8bb[m
Author: twil3akine <twil3akine@gmail.com>
Date:   Sun Feb 8 00:00:58 2026 +0900

    feat: support comments with ';'

[33mcommit 4c18d44e5ab1fd72030ba81ecd637c1cfea0deb2[m
Author: twil3akine <twil3akine@gmail.com>
Date:   Sat Feb 7 23:07:47 2026 +0900

    chore: change .gitignore
    
    - make it ignoring *.twn* file

[33mcommit ace4da9975cfd4e4484396fd28e708bf387b1f94[m
Author: twil3akine <twil3akine@gmail.com>
Date:   Sat Feb 7 22:47:32 2026 +0900

    docs: add README.md

[33mcommit a8fb49ad3e2ce40ee996c3cfe5449969e82ecbe2[m
Merge: 927e6cf 4a94327
Author: twil3akine <twil3akine@gmail.com>
Date:   Sat Feb 7 03:05:05 2026 +0900

    Merge branch 'feat/asm'

[33mcommit 4a943279ad8d1d06a7ed26a43cfdd5852cdf814e[m
Author: twil3akine <twil3akine@gmail.com>
Date:   Sat Feb 7 03:04:20 2026 +0900

    refactor: execute binaries directly instead of via cargo
    
    Switch process execution to invoke 'twnc' and 'twnvm' directly, removing the runtime dependency on Cargo.
    Improve error handling for missing executables.

[33mcommit fbeff0b1b8b51afd001e8a208fed8abc02947905[m
Author: twil3akine <twil3akine@gmail.com>
Date:   Sat Feb 7 02:59:41 2026 +0900

    feat: implement assembler to support mnemonic syntax over raw hex
    
    - Enable writing programs using assembly mnemonics (e.g., PUSH, ADD) instead of raw hexadecimal values.
    - Add support for labels to handle jump destinations dynamically.
    - Improve code readability and maintainability by abstracting opcode values.

[33mcommit b1f122e78c25e16766eb1124a02d2dbdbe6d0c4a[m
Author: twil3akine <twil3akine@gmail.com>
Date:   Sat Feb 7 02:57:35 2026 +0900

    chore: delete test files

[33mcommit 5766a1a8285b430413790de8912a3f957ec072c0[m
Author: twil3akine <twil3akine@gmail.com>
Date:   Sat Feb 7 02:46:49 2026 +0900

    fix: ensure JZ and PRINT consume stack values
    
    - Update `JZ` and `PRINT` to use `stack.pop()` instead of
    `stack.last()`.
      Previously, these instructions peeked at the value, leaving it on the
    stack. They now correctly consume the value.
    - Fix missing newline at the end of `loop_test.txt`.

[33mcommit 5a0430f90701bd112ac847887c5bb3d942390903[m
Author: twil3akine <twil3akine@gmail.com>
Date:   Sat Feb 7 02:46:03 2026 +0900

    feat: implement POP, MOD, and MODI opcodes
    
    - Add `POP` (0x02) instruction.
    - Add `MOD` (0x14) and `MODI` (0x19) instructions.
    - Reassign OpCodes for `ADDI` through `DIVI` (0x15-0x18) to accommodate
    the new `MOD` instruction.

[33mcommit ef5270233ec9a4c183650d24a3b5b8724bf018b4[m
Author: twil3akine <twil3akine@gmail.com>
Date:   Sat Feb 7 02:39:27 2026 +0900

    refactor: remove redundant main.rs and use shared error handler
    
    - Remove `src/main.rs` as the logic has moved to `src/bin/twnvm.rs`.
    - Replace the local `irregular` function in `twnvm.rs` with`
    twn::utils::irregular` to reduce code duplication.

[33mcommit 340cddc017f8d325babafac9df10b8761c74fb50[m
Author: twil3akine <twil3akine@gmail.com>
Date:   Fri Feb 6 23:16:58 2026 +0900

    feat: Enable VM to load bytecode from file
    
    This commit refactors the VM to read program bytecode from a specified file rather than standard input.
    This change is a crucial step towards separating the assembler and VM, allowing for:
    -   Improved modularity and clear separation of concerns.
    -   Easier integration with the upcoming assembler, which will output `.twnd` files.
    -   Enhanced usability, as users can now execute pre-compiled `.twnd` files directly.
    
    Error handling for missing file paths has also been added for a better user experience.

[33mcommit 927e6cfb427bfca0bdff09d0a991b4410e99f840[m
Author: twil3akine <twil3akine@gmail.com>
Date:   Fri Feb 6 21:49:57 2026 +0900

    feat: implement immediate arithmetic operations
    
    - Added OpCodes 0x14-0x17: ADDI, SUBI, MULI, DIVI
    - These instructions perform operations using the stack top and an immediate value from bytecode.

[33mcommit 7d4f3c8768ef44edb3b82a3bc229ae4eec2cb530[m
Merge: 3f43194 7b224bb
Author: twil3akine <twil3akine@gmail.com>
Date:   Fri Feb 6 21:35:20 2026 +0900

    Merge branch 'master' of https://github.com/twil3akine/twn

[33mcommit 3f43194514172bb5bdb269c11a8f29747a049ed7[m
Author: twil3akine <twil3akine@gmail.com>
Date:   Fri Feb 6 21:28:51 2026 +0900

    feat: implement memory system with STORE and LOAD opcodes
    
    - Add `memory` as a `Vec<Option<u8>>` to handle uninitialized access safely
    - Implement `STORE` (0x30) to move a value from stack to memory
    - Implement `LOAD` (0x31) to move a value from memory back to stack
    - Set `MEMORY_SIZE` to 256 to cover the full u8 address range
    - Add memory operations test case in `memory_test.txt`

[33mcommit 26bfe1c0bfc756d7e290680db1b2c563661313c6[m
Author: twil3akine <twil3akine@gmail.com>
Date:   Fri Feb 6 19:36:02 2026 +0900

    feat: implement jump instructions (JZ, JMZ) and FIN opcode
    
    - Reassign arithmetic opcodes (0x10-0x13)
    - Add JZ (0x20), JMZ (0x21), and FIN (0xFF) logic
    - Update input handling to support multi-line scripts
    - Update test.txt with a loop example

[33mcommit 7b224bbc02394b03aec527317184b8ac262e72e4[m
Author: twil3akine <twil3akine@gmail.com>
Date:   Fri Feb 6 19:36:02 2026 +0900

    feat: implement jump instructions (JZ, JMZ) and FIN opcode
    
    - Reassign arithmetic opcodes (0x10-0x13)
    - Add JZ (0x20), JMZ (0x21), and FIN (0xFF) logic
    - Update input handling to support multi-line scripts
    - Update test.txt with a loop example

[33mcommit 121d14a8e0985c5acaa281d39428d6e39a30b4e2[m
Author: twil3akine <twil3akine@gmail.com>
Date:   Fri Feb 6 15:50:16 2026 +0900

    feat: add irregular function
    
    - irregular function takes 1 argument(=statement). this print statement
    as error and exit 1

[33mcommit 107b49811f93221488327f88c79987f02aa27670[m
Author: twil3akine <twil3akine@gmail.com>
Date:   Fri Feb 6 15:32:50 2026 +0900

    chore: rename project from "machine-lang" to "twn"

[33mcommit 19e2d47bff330970a05b3ac5f5657319fe450f3a[m
Author: twil3akine <twil3akine@gmail.com>
Date:   Fri Feb 6 15:32:12 2026 +0900

    feat: add DUMP opcode for stack inspection
    
    - Implement DUMP opcode to print entire stack state
    - Reassign PRINT opcode to 0x90 for consistency

[33mcommit ec97673f72d26cba8e84d14deaaee4eaf05d55ca[m
Author: twil3akine <twil3akine@gmail.com>
Date:   Fri Feb 6 14:46:36 2026 +0900

    feat: implement a basic hex-driven stack machine
    
    - Support PUSH, ADD, SUB, MUL, DIV, and PRINT opcodes
    - Implement bytecode execution loop with a program counter
    - Parse hexadecimal input strings into a executable buffer
    - Use saturating arithmetic for stack operations

[33mcommit 1ef229167336e5050f4ada3e6776ad7c2c42680c[m
Author: twil3akine <twil3akine@gmail.com>
Date:   Fri Feb 6 12:27:20 2026 +0900

    Initial commit
